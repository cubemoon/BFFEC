<!-- 1区：标题 -->
<div class="heading-buttons">
  <h3>项目明细</h3>
  <!-- <div class="buttons pull-right">
    <a href="" class="btn btn-source-toggle btn-default btn-icon glyphicons embed_close"><i></i>显示源码</a>
  </div> -->
  <div class="clearfix"></div>
</div>
<div class="separator bottom"></div>
<!-- 1区：标题 End -->
<div class="innerLR" ms-controller="page">
  <!-- 2区：搜索 -->
  <div class="filter-bar">
    <form action="url.php" class="form-inline">
      <div class="form-group col-md-3 padding-none">
        <label class="label-control">项目状态：</label>
        <div class="col-md-8 padding-none">
          <select class="form-control" name="state" ms-each-el="stateArray" >
            <option ms-value="el.id">{{el.name}}</option>
          </select>
        </div>
      </div>
      <div class="form-group col-md-2">
        <label class="sr-only" for="inputName">项目名称：</label>
        <input type="text" class="form-control" placeholder="项目名称">
      </div>
      <div class="form-group col-md-2">
        <label class="sr-only" for="inputName">项目负责人：</label>
        <input type="text" class="form-control" placeholder="项目负责人"> 
      </div>
      <div class="form-group col-md-2">
        <label class="sr-only" for="inputName">项目参与者：</label>
        <input type="text" class="form-control" placeholder="项目参与者">
      </div>
        <button class="btn btn-default">搜索</button>
    </form>
  </div>
  <!-- 2区：搜索 End -->
  <!-- 3区：表格 -->
  <table class="table table-bordered table-condensed table-striped table-hover table-primary">
    <thead>
      <tr>
        <th>项目名称</th>
        <th>项目负责人</th>
        <th>参与人员</th>
        <th>项目状态</th>
        <th>项目时间点</th>
      </tr>
    </thead>
    <tbody ms-each-el="projectList">
      <tr>
        <td>{{decodeURIComponent(el.name)}}</td>
        <td>{{el.resPerson.name}}</td>
        <td ms-each-people="el.joinPersons">{{people.name + ($last ? '' : ', ')}}</td>
        <td>{{states[el.state]}}</td>
        <td>{{el.approvalStartTime.substr(0, 10) + ' 至 ' + el.approvalEndTime.substr(0, 10)}}</td>
      </tr>
    </tbody>
  </table>
  <!-- 3区：表格 End -->
  <script src="scripts/table-project.js"></script>
  <script type="text/javascript">
    // yp.ready(function(){
    //   avalon.define('page', function(vm){
    //     vm.projects = dataJson.projects;
    //     vm.membersProject = membersProject;
    //     /* 搜索功能 */
    //     vm.projectName = '';
    //     vm.projectLeader = '';
    //     vm.participator = '';
    //     vm.selectBox = 0;
    //     var store = vm.projects; 
    //     // 搜索按钮
    //     vm.searchBtn = function() {
    //       var result = [];
    //       for(var i = 0, len = store.length; i < len; i++) {
    //         if(
    //             (!vm.projectLeader.length || store[i].leader.indexOf(vm.projectLeader) != -1) && 
    //             (!vm.projectName.length || store[i].name.indexOf(vm.projectName) != -1) && 
    //             (!vm.participator.length || store[i].members.join(',').indexOf(vm.participator) != -1)
    //           ){
    //           result.push(store[i]);
    //         }
    //       }
    //       vm.projects = result;
    //       result = null;
    //     };
    //     // 下拉菜单
    //     vm.$watch('selectBox', function(newValue, oldValue) {
    //       var result = [],
    //           status = "";
    //       newValue == 0 ? status = '请选择' : newValue == 1 ? status = '未开始' : newValue == 2 ? status = '在进行' : status = '已完成';
    //       if(newValue == 0) {
    //         result = dataJson.projects;
    //       } else{
    //         for(var i = 0, len = dataJson.projects.length; i < len; i++) {
    //           if(dataJson.projects[i].status.indexOf(status) != -1) {
    //             result.push(dataJson.projects[i]);
    //           }
    //         }
    //       }
    //       store = result;
    //       result = null;
    //       status = undefined;
    //     });
    //     /* 搜索功能 end*/
    //   });

    //   avalon.scan();
    // });
  </script>
</div>